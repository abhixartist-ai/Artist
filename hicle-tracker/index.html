<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Monthly Visit Tracker</title>  <!-- Flatpickr CSS -->  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">  <style>
    body{
      margin:0;
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #667eea, #764ba2);
      min-height:100vh;
      display:flex;
      justify-content:center;
      align-items:flex-start;
      padding:20px;
    }
    .card{
      background:#fff;
      width:100%;
      max-width:900px;
      border-radius:16px;
      box-shadow:0 10px 25px rgba(0,0,0,0.15);
      padding:20px;
      overflow-x:auto; /* MOBILE FIX */
    }
    h1{
      margin:0 0 15px;
      text-align:center;
      color:#333;
    }
    .controls{
      display:flex;
      justify-content:center;
      gap:10px;
      margin-bottom:15px;
      flex-wrap:wrap;
    }
    select{
      padding:8px 12px;
      border-radius:8px;
      border:1px solid #ccc;
      font-size:14px;
    }
    table{
      width:100%;
      min-width:600px; /* MOBILE FIX */
      border-collapse:collapse;
    }
    th, td{
      padding:10px;
      border:1px solid #ddd;
      text-align:center;
      font-size:14px;
    }
    th{
      background:#f5f6fa;
    }
    .pending{
      background:#ffebeb;
      color:#c0392b;
      font-weight:bold;
    }
    .done{
      background:#e8fff1;
      color:#27ae60;
      font-weight:bold;
    }
    .area{
      color:#000;
      font-weight:bold;
      text-align:left;
    }
    input[type="text"]{
      width:100%;
      padding:10px;
      min-height:44px; /* DATE INPUT MOBILE FIX */
      border-radius:8px;
      border:1px solid #ccc;
      font-size:15px;
      box-sizing:border-box;
      background:#fff;
    }
    @media(max-width:600px){
      th, td{font-size:12px; padding:8px;}
    }

/* Flatpickr colorful theme */
.flatpickr-calendar{
  border-radius:14px;
  box-shadow:0 10px 25px rgba(0,0,0,0.25);
}
.flatpickr-months{
  background:linear-gradient(135deg,#667eea,#764ba2);
  border-radius:14px 14px 0 0;
}
.flatpickr-current-month,
.flatpickr-monthDropdown-months,
.flatpickr-current-month .numInputWrapper{
  color:#fff !important;
}
.flatpickr-weekdays{
  background:#f0f2ff;
}
.flatpickr-weekday{
  color:#5a5fd7;
  font-weight:bold;
}
.flatpickr-day{
  border-radius:8px;
}
.flatpickr-day.today{
  border:2px solid #667eea;
}
.flatpickr-day.selected{
  background:linear-gradient(135deg,#667eea,#764ba2);
  color:#fff;
}
.flatpickr-day:hover{
  background:#dfe4ff;
}
</style></head>
<body>
  <div class="card">
    <h1>Monthly Visit Tracker</h1><div class="controls">
  <select id="yearSelect"></select>
  <select id="monthSelect"></select>
</div>

<table>
  <thead>
    <tr>
      <th>Area Name</th>
      <th>Visit Date (DD-MM-YYYY)</th>
      <th>Remark</th>
    </tr>
  </thead>
  <tbody id="tableBody"></tbody>
</table>

  </div>  <!-- Flatpickr JS -->  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script><script>
const areas = ["Sailana","Birmaval","Raoti","Ratlam","Neemuch","Mandsor","Namli"];
const yearSelect = document.getElementById("yearSelect");
const monthSelect = document.getElementById("monthSelect");
const tableBody = document.getElementById("tableBody");

function loadYearMonth(){
  const now = new Date();
  const y = now.getFullYear();
  const m = now.getMonth();

  yearSelect.innerHTML='';
  for(let i=y-1;i<=y+1;i++){
    yearSelect.innerHTML += `<option value="${i}">${i}</option>`;
  }

  monthSelect.innerHTML='';
  for(let i=0;i<12;i++){
    const d=new Date(0,i);
    monthSelect.innerHTML += `<option value="${i+1}">${d.toLocaleString('default',{month:'long'})}</option>`;
  }

  yearSelect.value=y;
  monthSelect.value=m+1;
}

function key(){
  return `${yearSelect.value}-${String(monthSelect.value).padStart(2,'0')}`;
}

function loadTable(){
  tableBody.innerHTML='';
  const k = key();
  const data = JSON.parse(localStorage.getItem(k)||'{}');

  areas.forEach(area=>{
    const tr=document.createElement('tr');

    const tdA=document.createElement('td');
    tdA.textContent=area;
    tdA.className='area';

    const tdD=document.createElement('td');
    const dateInput=document.createElement('input');
    dateInput.type='text';
    dateInput.placeholder='DD-MM-YYYY';
    dateInput.value=data[area]?.date||'';

    const tdR=document.createElement('td');
    const rem=document.createElement('input');
    rem.type='text';
    rem.placeholder='Remark';
    rem.value=data[area]?.remark||'';

    flatpickr(dateInput,{
      dateFormat:'d-m-Y',
      defaultDate:dateInput.value || null,
      onChange:function(){ save(); }
    });

    function save(){
      tr.className = dateInput.value ? 'done':'pending';
      data[area]={date:dateInput.value,remark:rem.value};
      localStorage.setItem(k,JSON.stringify(data));
    }

    rem.addEventListener('input',save);

    tdD.appendChild(dateInput);
    tdR.appendChild(rem);

    tr.appendChild(tdA);
    tr.appendChild(tdD);
    tr.appendChild(tdR);

    tableBody.appendChild(tr);
    save();
  });
}

yearSelect.onchange=loadTable;
monthSelect.onchange=loadTable;

loadYearMonth();
loadTable();
</script></body>
</html>
